<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>页面换肤</title>
		<link rel="icon" href="img/ct.png">
		<style>
			fieldset{
				width:600px;
			}
			legend{
				color: red;
			}
			#div1{
				border: 1px solid lightgray ;
				height:40px;
				margin-bottom: 20px;;
			}
			#c1,#c2,#c3,#c4,#c5,#c6{				
				width:20px ;
				height: 20px;
				float: left;
				margin: 10px;
				position: relative;
			}
			p{
				width: 520px;
				height: 55px;
				margin-left: 30px;;
			}
		</style>
	</head>
	<body>
		<fieldset>
			<legend><h1>页面换肤</h1></legend>
			<div id="div1">
				<div id="c1" style="background-color: darkgray;"></div>
				<div id="c2" style="background-color: mediumpurple;"></div>
				<div id="c3" style="background-color: red;"></div>
				<div id="c4" style="background-color: deepskyblue;"></div>
				<div id="c5" style="background-color: orange;"></div>
				<div id="c6" style="background-color: greenyellow;"></div>
			</div>
			<div2 id="div2">
				<p id="p">LocalStorage将数据保存在客户端本地的硬件设备中，即使浏览器被关闭了，
				该数据仍然存在，下次打开浏览器访问网站时仍然可以继续使用。</p>
			</div2>
		</fieldset>
	</body>
	<script>		
		window.onload=function(){
			var p=document.getElementById("p"); 			
			var color,e1,count=0;	
			if(localStorage.getItem("i")==null||localStorage.getItem("color")==null){
				localStorage.setItem("i",'1');
				localStorage.setItem("color","darkgray");
			}
			var elocal=document.getElementById("c"+localStorage.getItem("i"));
			if(localStorage.getItem("i")!=null){
				p.style.backgroundColor=localStorage.getItem('color');
				elocal.style.top="-4px";
			}
			for(var i=1;i<7;i++){
			(function(i){
				var e=document.getElementById("c"+i);			
				e.onclick=function(){
					count++;
					if(count==1){
						e1=e;
						elocal.style.top="0px";
					}
					if(e!==e1){
						e1.style.top="0px";
					}
					e.style.top="-4px";
					color=e.style.backgroundColor;	
					p.style.backgroundColor=e.style.backgroundColor;
					if(window.localStorage){
						localStorage.setItem('color',color);
						localStorage.setItem("i",i)
					}
					e1=e;
				}
			})(i)
		}
		
		}
	</script>
</html>
